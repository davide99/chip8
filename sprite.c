#include "sprite.h"
#include <string.h>

#define SPRITE_WIDTH 8
#define SPRITE_MIN_HEIGHT 1
#define SPRITE_MAX_HEIGHT 15

Sprite spriteInit(uint8_t height) {
    Sprite sprite = {.data = NULL, .height = 0, .width = 0};

    if (height < SPRITE_MIN_HEIGHT || height > SPRITE_MAX_HEIGHT)
        return sprite;

    sprite.width = SPRITE_WIDTH;
    sprite.height = height;

    return sprite;
}

void spriteGenCharInMemory(uint8_t *mem) {
    uint8_t chars[] = {
            0xF0, 0x90, 0x90, 0x90, 0xF0, //0
            0x20, 0x60, 0x20, 0x20, 0x70, //1
            0xF0, 0x10, 0xF0, 0x80, 0xF0, //2
            0xF0, 0x10, 0xF0, 0x10, 0xF0, //3
            0x90, 0x90, 0xF0, 0x10, 0x10, //4
            0xF0, 0x80, 0xF0, 0x10, 0xF0, //5
            0xF0, 0x80, 0xF0, 0x90, 0xF0, //6
            0xF0, 0x10, 0x20, 0x40, 0x40, //7
            0xF0, 0x90, 0xF0, 0x90, 0xF0, //8
            0xF0, 0x90, 0xF0, 0x10, 0xF0, //9
            0xF0, 0x90, 0xF0, 0x90, 0x90, //A
            0xE0, 0x90, 0xE0, 0x90, 0xE0, //B
            0xF0, 0x80, 0x80, 0x80, 0xF0, //C
            0xE0, 0x90, 0x90, 0x90, 0xE0, //D
            0xF0, 0x80, 0xF0, 0x80, 0xF0, //E
            0xF0, 0x80, 0xF0, 0x80, 0x80, //F
    };

    memcpy(mem + FIRST_CHAR_SPRITE_OFFSET, chars, sizeof(uint8_t) * SPRITE_CHAR_HEIGHT * CHAR_SPRITES);
}

Sprite spriteReadFromMemory(uint8_t *data, uint8_t height) {
    Sprite sprite = spriteInit(height);
    sprite.data = data;

    return sprite;
}